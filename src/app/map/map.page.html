<!-- Perbaikan HTML - Hapus ion-card dari map container -->
<ion-content [fullscreen]="true">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <h1>Smart City Map</h1>
      <p>Monitoring kota Surakarta (Solo)</p>
    </div>
  </div>

  <!-- Map Container - DIPERBAIKI -->
  <div class="map-section">
    <div class="map-container">
      <div id="map"></div>
      
      <!-- Map Legend - pindah ke dalam map container -->
      <div class="map-legend">
        <div class="legend-title">SeismoSens Network</div>
        <div class="legend-item" *ngFor="let item of legendItems">
          <div class="legend-dot" [style.background]="item.color"></div>
          <span>{{ item.label }} ({{ item.count }})</span>
        </div>
      </div>

      <!-- Map Controls - pindah ke dalam map container -->
      <div class="map-controls">
        <ion-fab-button size="small" color="light" class="map-control-btn" (click)="zoomIn()">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
        <ion-fab-button size="small" color="light" class="map-control-btn" (click)="zoomOut()">
          <ion-icon name="remove"></ion-icon>
        </ion-fab-button>
        <ion-fab-button size="small" color="light" class="map-control-btn" (click)="centerMap()">
          <ion-icon name="locate"></ion-icon>
        </ion-fab-button>
        <ion-fab-button size="small" color="light" class="map-control-btn" (click)="fitToMarkers()">
          <ion-icon name="expand"></ion-icon>
        </ion-fab-button>
      </div>
    </div>
  </div>

  <!-- Filter Controls -->
  <ion-card class="filter-card">
    <ion-card-content>
      <div class="filter-title">Filter Peta</div>
      <div class="filter-buttons">
        <ion-button
          *ngFor="let filter of filterOptions"
          [fill]="filter.active ? 'solid' : 'outline'"
          [color]="filter.active ? 'primary' : 'medium'"
          size="small"
          class="filter-btn"
          (click)="filterMarkers(filter.id)"
        >
          {{ filter.label }}
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>