<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Smart City Map</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Welcome Header -->
  <div class="header">
    <div class="welcome-text">
      <div class="welcome-title">Smart City Map üó∫</div>
      <div class="welcome-subtitle">Monitoring kota Surakarta (Solo)</div>
    </div>
  </div>

  <!-- Map Container -->
  <div class="map-container">
    <div id="map"></div>
    
    <!-- Map Legend -->
    <div class="map-legend">
      <div class="legend-title">SeismoSens Network</div>
      <div 
        class="legend-item" 
        *ngFor="let item of legendItems"
      >
        <div 
          class="legend-dot" 
          [style.background]="item.color"
        ></div>
        <span>{{ item.label }} ({{ item.count }})</span>
      </div>
    </div>
    
    <!-- Map Controls -->
    <div class="map-controls">
      <ion-fab-button 
        size="small" 
        class="map-btn"
        (click)="zoomIn()"
      >
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
      
      <ion-fab-button 
        size="small" 
        class="map-btn"
        (click)="zoomOut()"
      >
        <ion-icon name="remove"></ion-icon>
      </ion-fab-button>
      
      <ion-fab-button 
        size="small" 
        class="map-btn"
        (click)="centerMap()"
      >
        <ion-icon name="locate"></ion-icon>
      </ion-fab-button>
    </div>
  </div>

  <!-- Filter Controls -->
  <div class="filter-controls">
    <div class="filter-title">Filter Peta</div>
    <div class="filter-buttons">
      <button 
        *ngFor="let filter of filterOptions"
        class="map-filter"
        [class.active]="filter.active"
        (click)="filterMarkers(filter.id)"
      >
        {{ filter.label }}
      </button>
    </div>
  </div>

  <!-- Content Section -->
  <div class="content-section">
    <div class="section-title">Perangkat di Surakarta</div>
    
    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value success">{{ getTotalActive() | number }}</div>
        <div class="stat-label">Total Aktif</div>
      </div>
      <div class="stat-card">
        <div class="stat-value primary">{{ getCityUptime() }}</div>
        <div class="stat-label">Uptime Kota</div>
      </div>
    </div>
    
    <!-- Public Locations -->
    <div 
      class="device-card" 
      *ngFor="let location of getPublicLocations()"
      [ngClass]="location.status"
      (click)="showLocationDetail(location.name)"
    >
      <div class="device-header">
        <div class="device-info">
          <h3>{{ location.name }}</h3>
          <p>{{ location.distance }} ‚Ä¢ {{ location.category }} ‚Ä¢ {{ location.address }}</p>
        </div>
        <div class="device-status" [ngClass]="location.status">
          {{ getStatusText(location) }}
        </div>
      </div>
    </div>
    
    <!-- User Devices Section -->
    <div class="user-devices-title">Perangkat Anda di Solo</div>
    
    <div 
      class="device-card user-device" 
      *ngFor="let device of getUserDevices()"
      (click)="showDeviceDetail(device.id)"
    >
      <div class="device-header">
        <div class="device-info">
          <h3>{{ device.name }}</h3>
          <p>{{ device.category }} ‚Ä¢ {{ device.address }}</p>
        </div>
        <div class="device-status user">‚óè Milik Anda</div>
      </div>
      <div class="device-metrics" *ngIf="device.health && device.health > 0">
        <div class="metric">
          <div class="metric-value">{{ device.health }}%</div>
          <div class="metric-label">Health</div>
        </div>
        <div class="metric">
          <div class="metric-value">Online</div>
          <div class="metric-label">Status</div>
        </div>
      </div>
      <div class="device-metrics" *ngIf="!device.health || device.health === 0">
        <div class="metric">
          <div class="metric-value offline">0%</div>
          <div class="metric-label">Health</div>
        </div>
        <div class="metric">
          <div class="metric-value offline">Offline</div>
          <div class="metric-label">Status</div>
        </div>
      </div>
    </div>
  </div>
</ion-content>